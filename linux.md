# Linux

## 基本介绍

* Linux的文件系统采用级层式子的树状目录结构，
* 最上层是根目录“/”
* Linux世界里，一切皆文件

##  目录用途

* `/bin：` 是Binary的缩写，这个目录存放着最经常使用的命令。
* /sbin：s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。
* `/home：`存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
* `/root：`该目录为系统管理员，也称作超级权限者的用户主目录。
* /lib：系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
* /lost+found：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
* /etc：所有的系统管理所需要的配置文件和子目录my.conf。
* `/usr/local`：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。
* `/boot：`存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
* /proc：这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息。
* /srv：service的缩写，该目录存放一些服务启动之后需要提供的数据。
* /sys：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs。
* /tmp：这个目录是用来存放一些临时文件的。
* /dev：类似windows的设备管理器，把所有的硬件用文件的形式存储。
* `/media：`linux系统会自动识别一些设备，例如U盘光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
* `/mnt：`系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了。
* `/opt：`这是给主机额外安装软件所摆放的目录，如安装ORACLE数据库就可放到该目录下。默认为空。
* /usr/local：这是另一个给主机额外安装软件所安装的目录，一般是通过编译源码的方式安装的程序。
* `/var：`这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下，包括各种日志文件。
* /selinux：SELinux是一种安全子系统，它能控制程序只能访问特定文件。

## 总结

1. Linux的目录中有且只有一个根目录。
2. Linux的各个目录存放的内容是规划好，不用乱放文件。
3. Linux是以文件的形式管理我们的设备，因此linux系统，一切皆为文件。
4. Linux的各个文件目录下存放什么内容，必须有一个认识。

## 关机、重启和用户登录注销

##  关机&重启命令

###  shutdown

* shutdown -h now：表示立即关机
* shutdown -h 1：表示1分钟后关机
* shutdown -r now：立即重启

###  halt

* halt：直接使用，关机

###  reboot

* reboot 重启系统

###  sync

* sync：把内存的数据同步到磁盘上

> 当我们关机或者重启时，都应该先执行一下sync，防止数据丢失。

## 2. 用户登录注销

* 登录时少用root账号登录，以避免操作失误的损失
* 平时可登录普通账户，再用“su - 用户名”切换成管理员登录

### 2.1 logout

* logout：注销用户

> 在图形运行级别无效，在运行级别3有效。

## 远程登陆

1. Xshell

* 可用Xshell等软件输入主机的IP地址，登录名链接

2. ssh

* 终端里输入 ssh 用户名@地址  回车后输入密码即可登陆

3. ftp 文件传输

* 主要用于用于上传或者下载文件

## 1.基本命令

linux使用的是bash命令。

### 1.1 命令规则 

1. 命令格式

```bash
命令名  [选项] [参数1] [参数2].....
cp -i file.c myfile.c
```

2.  规则 

   * 命令必须是小写英文字母

   * 一般格式中 [选项]中内容是选填的，可有可无

   * 选项是对命令的特别定义，以 "-"开始，多个选项可以用 "-" 连起来

   * 例如一下两个命令是等效的

     ```bash
     ls -l -a
     ls -la
     ```

   * 如果命令行没有提供参数，命令会从键盘接收数据，输出结果打印在显示器上，错误信息也是同样的显示。可使用重定向功能对文件进行重定向。

   * 命令正常执行返回值是0，表示执行成功。若命令执行出错，可以输入 "$?" 查看

### 1.2  输入命令

1. 输入命令后按回车执行。

2. Shell严格区分大小写。

3. 若是系统找不到输入的命令会显示反馈信息 "Command not Found"

4. 若是一个命令太长，一行放不下，可以在每行结尾输入 "\\" 字符，并按回车键，Shell会在下一行返回一个">"作为提示符，表示命令行尚未结束，允许输入有关信息。例如：

   ```bash
   $ echo The old has past \ <Enter>
   > a fresh man \ <Enter>
   > !
   
   The old has past a fresh man! #屏幕会打印出这个1.3 
   ```

### 1.3 基本命令

#### 1.3.1 who命令

  who命令将列出正在使用系统的用户、所用终端名和注册系统的时间，"who am i "命令将列出使用该命令的当前用户的相关信息

####  1.3.2 echo命令

   echo命令将命令行中的参数打印至屏幕上。

####  1.3.3 date命令

​     date命令将在屏幕上显示或者设置系统的日期和时间。如果不输入参数和选项，则会直接显示系统当前的日期和时间。

```bash
# date
三 5月 12 14:08:12 CST 2010
# date '+%c' 
2010年05月12日 星期三 14时09分02秒
# date '+%D' //显示完整的时间
05/12/10
# date '+%x' //显示数字日期，年份两位数表示
2010年05月12日
# date '+%T' //显示日期，年份用四位数表示
14:09:31
# date '+%X' //显示24小时的格式
14时09分39秒

# 显示日期与设定时间(12:34:56)
date --date '12:34:56'
```

#### 1.3.4 cal命令

cal命令将显示公元任意一年或者一个月的日历，如果不带参数，输出的则是现在月份的日历。

cal 后跟的第一个参数是年份。

```bash
cal 10
# 输出公元10年的日历
cal 10 2049
# 输出2049年10月的日历
```



#### 1.3.5 clear命令

清屏命令。

#### 1.3.6 passwd命令

passwd可以修改口令。系统处于安全考虑，所有口令均无显示。



## 2.文件操作

#### 2.1  cat命令

```bash
cat [选项] file	
```

cat 命令可以显示文件内容，也可以连接两个或者多个文件，例如 

```bash
cat f1 f2 > f3
```

将文件 f1 和 f2 内容合并，通过重定向符">"放入文件f3中

```bash
cat f1 # 在屏幕显示文件f1的内容
cat f2 # 在屏幕显示 f1 和 f2 的内容
cat f1 f2 > f3 #将文件 f1 和 f2 的内容放进 f3
```

#### 2.2 more命令

```bash
more [选项] file
```

* 空格键显示下一屏内容
* 回车键显示下一行内容
* “/”键，会出现一个输入模式，可以在文中寻找下一个匹配的模式
* H 或者 ? 键显示帮助，其中有相关的帮助信息
* B键显示上一屏内容
* Q键，退出more命令

```bash
more -5 # 一屏显示5行
more -d #在每屏底下有更友好的提示信息
more -c 或者 more -p #不滚屏，显示下一屏时清屏
more -s #把文件中连续的空白行压缩成一个空白行显示
more +5 # 从行号5开始
```

#### 2.3 less命令

less命令基本同more，支持方向上下键翻页。

#### 2.4 head命令

head命令在屏幕显示指定文件开头若干行，默认是10行。

常用选项：

* -c , --bytes = [-]N 显示每个文件前N字节，若数字N前有“-”，则分别显示每个文件除了最后N字节以外的所有内容
* -n --lines=[-]N,显示每个文件前N行，若数字N前有“-”，则分别显示每个文件除了最后N行以外的所有内容
* -q,-quiet,--silent 不显示给定文章的标题
* -v,--verbose 始终显示给定的文件标题

#### 2.5 tail命令

```bash
tail [选项] file ...
```

tail命令在屏幕显示指定文件file的末尾10行，若给的文件不只一个，则在显示的每个文件前面加上一个文件名标题。若没有指定文件或者指定文件名为 “-”，则读取标准输入。

* -c --bytes=N : 输出最后N字节
* -f ：当文件增长时，输出附加数据
* -n --lines = N : 在屏幕输出最后N行
* -q --quiet --silent : 不输出包含文件名的标题
* -v --version ： 始终输出包含给定文件名的标题

#### 2.6 touch命令

```bash
touch [选项] file...
```

touch 命令会修改指定文件的时间标签,把已存在的文件时间标签更改为系统当前的时间，数据会原封不动的保留起来。若文件不存在，则会创建一个新文件。

* -a ：仅更改指定文件的存取时间
* -c --no--create ： 不创建任何文件
* -m ： 仅改变指定文件的修改时间
* -t  STAMP ：使用STAMP指定的时间标签，而不是系统当前的时间

#### 2.7 匹配、排序及显示指定内容的命令

##### 2.7.1 grep命令

grep命令组在文本文件中查找指定模式的此或者短语，并在屏幕上打印出来。

一般格式

```bash
grep [选项] 查找模式 [文件1，文件2,.....]
grep [选项] [-e 查找模式 | -f 文件] [文件名1，文件名2......] 
```

常用选项

* -E : 查找模式使用正则表达式
* -F : 查找模式解释为字符串
* -c ,--count : 只显示文件匹配字符串的行的总数
* -i ,--ignore-case : 匹配时忽略大小写
* -R ,-r, --recursive : 递归的方式匹配目录下所有子目录的文件
* -n ： 显示匹配的信息时显示行号
* -v ：只显示不匹配的字符串
* -x ：只显示整个行都严格匹配的行

注意：

1. 在命令名输入后先输入搜索模式，然后是搜索的文件
2. 文件名后可以使用通配符  例如 *
3. 查找子目录的文件 需要使用 -r
4. 若要搜索的字符串含有空格 ，字符串用引号括起来
5. 用选项 -f 可以大批的在文件中搜索字符串

##### 2.7.2 sort命令

sort 命令对文本文件的各行进行排序。

一般格式

```bash
sort [选项] [文件列表]
```

- -b 忽略每行前面开始出的空格字符。
- -c 检查文件是否已经按照顺序排序。
- -d 排序时，处理英文字母、数字及空格字符外，忽略其他的字符。
- -f 排序时，将小写字母视为大写字母。
- -i 排序时，除了040至176之间的ASCII字符外，忽略其他的字符。
- -m 将几个排序好的文件进行合并。
- -M 将前面3个字母依照月份的缩写进行排序。
- -n 依照数值的大小排序。
- -u 意味着是唯一的(unique)，输出的结果是去完重了的。
- -o<输出文件> 将排序后的结果存入指定的文件。
- -r 以相反的顺序来排序。
- -t<分隔字符> 指定排序时所用的栏位分隔字符。
- +<起始栏位>-<结束栏位> 以指定的栏位来排序，范围由起始栏位到结束栏位的前一栏位。
- --help 显示帮助。
- --version 显示版本信息。
- [-k field1[,field2]] 按指定的列进行排序。

##### 2.7.3 uniq 命令

uniq命令从排好序的文件中去除重复行。

一般格式:

```bash
uniq [选项] [输入[输出文件]]
```

- -c或--count 在每列旁边显示该行重复出现的次数。
- -d或--repeated 仅显示重复出现的行列。
- -f或--skip-fields=N 忽略比较前N个字段。
- -s 或--skip-char = N 忽略比较前N个字符。
- -u或--unique 仅显示出一次的行列。

#### 2.8 查找和比较文件的命令

##### 2.8.1 comm命令

comm 命令对两个已排序的文件进行逐行比较。

一般格式

```bash
comm [-123] file1 file2
```

-123 选项1 2 3 分别表示不显示comm输出的第一列 第二列和第三列。

##### 2.8.2 diff命令

diff命令比较两个文本文件，并找出他们的不同，比comm更好用，并且不要求两个文件预先排好序。

一般格式

```bash
diff [选项] 文件1 文件2
```

输出信息以"<"开头的行属于文件1，以">"开头的行属于文件2

* -b 忽略空格造成的差别
* -c 输出格式是带上下文的三行
* -C n 输出格式是带上下文的n行
* -e 输出一个合法的ed脚本
* -i 忽略字母的大小写
* -r 当文件1 文件2都是目录时，递归比较找到各子目录

##### 2.8.3 cmp命令

cmp命令对两个文件进行比较

一般格式：

```bash
cmp [选项] file file2
```

cmp命令会对文件进行逐字节进行比较，若相同则不输出，反之则标出第一个不同之处，在第几行有多少字节不一样。 若没有文件名，或者给出的文件名为 ”-“，cmp命令会从标准输入读取数据

* -b --print-bytes 显示有差异的字节
* -i --ignore-inital=SKIP 跳过两个文件开头的SKIP字节
* -n --bytes=LIMIT 至多比较LIMIT字节

##### 2.8.4 find命令

find命令在指定的目录下查找相应的文件

一般格式

```bash
find [目录名] [条件表达式]
```

说明： find命令从指定目录开始递归搜索其各子目录，寻找满足条件的文件，并进行相应操作。

* -mount, -xdev : 只检查和指定目录在同一个文件系统下的文件，避免列出其它文件系统中的文件
* -amin n : 在过去 n 分钟内被读取过
* -anewer file : 比文件 file 更晚被读取过的文件
* -atime n : 在过去n天内被读取过的文件
* -cmin n : 在过去 n 分钟内被修改过
* -cnewer file :比文件 file 更新的文件
* -ctime n : 在过去n天内被修改过的文件
* -empty : 空的文件-gid n or -group name : gid 是 n 或是 group 名称是 name
* -ipath p, -path p : 路径名称符合 p 的文件，ipath 会忽略大小写
* -name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写
* -size n : 文件大小 是 n 单位，b 代表 512 位元组的区块，c 表示字元数，k 表示 kilo bytes，w 是二个位元组。
* -type c : 文件类型是 c 的文件。
* d: 目录
* c: 字型装置文件
* b: 区块装置文件
* p: 具名贮列
* f: 一般文件
* l: 符号连结
* s: socket
* -pid n : process id 是 n 的文件

#### 2.9 复制、删除和移动文件的命令

##### 2.9.1 cp命令

cp命令是把源文件或者目录复制到目标文件或者目录中。

一般命令:

```bash
cp [选项] 源文件或者目录  目标文件目录
```

如果是目录需要使用“ -r ”命令递归复制整个目录。

选项 

* -l 不复制 创建指向文件的链接
* -d 复制时保留权限

##### 2.9.2 rm命令

rm 命令删除目录或者文件

一般格式:

```bash
rm [选项] 文件列表
```

* -f 忽略不存在的文件
* -r 递归删除目录下所有文件
* -i 交互式删除文件
* -d 删除空目录

##### 2.9.3 mv命令

mv命令把一个文件从一个目录移动到另一个目录。

```bash
mv [选项] source target
```

* -i 交互式操作
* -f 禁止交互式操作
* -t 移动所有的源文件

#### 2.10 文件内容统计命令

wc命令统计指定文件的字节数、字数、行数。并把统计结果显示出来。

一般格式:

```bash
wc [选项] [文件] ....
```

* -c 统计字节数
* -l 统计行数
* -w 统计字数

### 3.目录及其操作命令

#### 3.1创建和删除目录

##### 3.1.1 mkdir命令

mkdir 命令用来创建目录

一般格式:

```bash
mkdir [选项] dirname
```

* -p 一次创建多级目录

##### 3.1.2 rmdir命令

rmdir命令删除一个或者多个空目录

一般命令:

```bash
rmdir [选项] dirname
```

* -p 递归删除
* -v 对于每个被处理的目录输出相关诊断信息

#### 3.2 改变工作目录和显示目录内容

##### 3.2.1 cd命令

cd命令用于改变目录。

一般格式：

```bash
cd [dirname]

cd ..   # 返回上一级
```

##### 3.2.2 pwd命令

pwd命令查看当前工作目录的绝对路径。

一般格式:

```bash
pwd
```

##### 3.2.3 ls命令

ls命令列出指定目录的内容

一般格式:

```bash
ls [选项] [目录或者文件]
```

- -a 显示目录下所有的子目录和文件
- -C 分列为多项
- -d 如果是目录只显示名字，不显示内容

#### 3.3 改变文件或者目录存取权限的命令

##### 3.3.1 chmod命令

chmod用于改变或设置文件或目录的存取权限。

只有文件主或者超级用户才能使用此命令改变文件或者目录权限。

1. 以符号模式改变权限

一般格式：

```bash
chmod key 文件名
```

说明：

key 由 [who] [操作符号] [mode] 组成

[who] 可以是：

* u 用户(user)  文件或者目录的所有者
* g 同组(group) 同ID组的用户
* o 其他(others) 其他用户
* a 全部(all) 全部用户  系统默认

[操作符号]可以是:

* +添加权限
* -取消权限
* =赋予给定权限并取消其他权限

[mode] 可以是：

* r 可读
* w 可写
* x 可执行
* u 与文件主有一样的权限
* g 与文件属主同组的用户一样的权限
* o 与其他用户拥有一样的权限

2. 绝对方式改变权限

一般格式:

```bash
chmod mode 文件名
```

##### 3.3.2 umask命令

umask命令用来设置显示新建文件权限的掩码

一般格式:

```bash
umask [-S] mode
```

#### 3.4改变用户组和文件主的命令

##### 3.4.1 chgrp命令

chgrp命令改变文件或者目录所属的用户组。

一般格式：

```bash
chgrp [选项] 组名 文件名
```

* -R 递归改变目录下的所有子目录和文件
* -v 详细显示出所作的工作

##### 3.4.2 chown命令

chown命令改变某个文件或目录的所有者和所属的组。

一般格式:

```bash
chown [选项] 用户或组 文件名
```

* -R 递归改变目录下的所有子目录和文件
* -v 详细显示出所作的工作

### 4. 进程管理

#### 4.1 ps命令

ps命令查看当前系统中运行的进程信息

一般格式：

```bash
ps [选项]
```

*  -a：显示当前终端的所有进程信息。
*  -u：以用户的格式显示进程信息。
*  -x：显示后台进程运行的参数。
*  -axu | grep xxx：过滤得到xxx的信息。
*  -ef：以全格式显示当前所有的进程，查看进程的父进程。
* -e：显示所有进程。
* -f：全格式。

各字段含义:

* PID 进程标志号
* TTY 创建进程时使用的终端
* TIME 进程累计使用cpu时间
* CMD 执行进程的命令名
* UID 进程的用户ID
* PPID 父进程的ID
* C 进程最近使用CPU的估算
* STIME 进程开始时间
* USER 启动线程用户
* %MEN 占用内存和总内存的比例

#### 4.2 nice命令

nice命令用于修改进程的优先级

一般格式:

```bash
nice [选项] [命令]
```

* -n 将nice值加上n 默认是10

#### 4.3 kill命令

kill命令用于杀死一个进程

一般格式:

```bash
kill [-s 信号|-p] [-a] 进程号
kill -l [信号] 
```

* -s 指定需要发送的信号
* -p 指定kill命令只是显示进程PID 
* -l 显示信号名称列表

#### 4.4 sleep命令

sleep命令令一个线程暂停执行一段时间。

一般格式

```bash
sleep 时间值
```



### 5.文件压缩与解压

#### 5.1 gzip命令

gzip对文件进行压缩与解压

一般格式:

```bash
gzip [选项] [name....]
```

* -c 保留原文件，压缩到指定位置
* -d 解压文件
* -l 列出压缩文件的信息
* -r 递归压缩所有文件或者解压
* -t 检查压缩文件的完整性
* -v 对于每个压缩文件和解压缩文件，显示文件名和压缩比
* -num 调整压缩速度

#### 5.2 unzip命令

unzip命令解压，一般被解压的文件后缀是.zip

一般格式:

```bash
unzip [选项] 被压缩的文件
```

* -x 文件列表：解压缩文件，文件列表中指定文件不解压
* -t 检查压缩文件的完整性t
* -z 只显示压缩文件的注释
* -n不覆盖存在的文件
* -o 覆盖存在的文件，不给提示信息
* -j 废除压缩结构，把所有文件放到同一目录

#### 5.3 tar命令

 tar：打包指令，最后打包后的文件是.tar.gz的文件

* tar [选项] xxx.tar.gz (打包的内容)
* -c：产生.tar打包文件
* -v：显示详细信息
* -f：指定压缩后的文件名
* -z：打包同时压缩
* -x：解压.tar文件
* 压缩：tar -zcvf (压缩后文件名) (要压缩的文件)
* 解压：tar -zxvf (要解压的文件)
* 解压到指定目录：tar -zxvf (要解压的文件) -C (指定目录)，指定解压到的目录要存在。